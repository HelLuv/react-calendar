(this["webpackJsonpcalendar-react-ts"]=this["webpackJsonpcalendar-react-ts"]||[]).push([[0],{202:function(e,t,n){},310:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n(30),s=n.n(c),u=n(85),o=n(145),i=n(313),l=(n(202),n(29)),j=n(4),d=n(90),h=n(61),b=n(319),O=n(318),f=function(e){var t=e.getFullYear(),n=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0".concat(e.getDate()):e.getDate();return"".concat(t,"-").concat(n,"-").concat(r)},p=n(8),v=function(e){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(O.a,{dateCellRender:function(t){var n=f(null===t||void 0===t?void 0:t.toDate()),r=e.events.filter((function(e){return e.date===n}));return Object(p.jsx)("div",{children:r.map((function(e,t){return Object(p.jsx)("div",{children:e.description},t)}))})}})})},m=n(1),g=n(315),x=n(317),E=n(316),S=n(150),y=n(58),T=n.n(y),I=function(e){return{required:!0,message:e}},w=function(e){return{validator:function(t,n){return n.isSameOrAfter(T()())?Promise.resolve():Promise.reject(new Error(e))}}},_=u.c,U=function(e){var t=Object(a.useState)({author:"",date:"",description:"",guest:""}),n=Object(j.a)(t,2),r=n[0],c=n[1],s=_((function(e){return e.auth})).user;return Object(p.jsxs)(g.a,{onFinish:function(){e.submit(Object(m.a)(Object(m.a)({},r),{},{author:s.username}))},children:[Object(p.jsx)(g.a.Item,{label:"Event's description",name:"description",rules:[I("Please input event's description")],children:Object(p.jsx)(x.a,{onChange:function(e){return c(Object(m.a)(Object(m.a)({},r),{},{description:e.target.value}))},value:r.description})}),Object(p.jsx)(g.a.Item,{label:"Event's date",name:"date",rules:[I("Please input event's date"),w("You cannot create an event in the past")],children:Object(p.jsx)(E.a,{onChange:function(e){return function(e){e&&c(Object(m.a)(Object(m.a)({},r),{},{date:f(null===e||void 0===e?void 0:e.toDate())}))}(e)}})}),Object(p.jsx)(g.a.Item,{label:"Event's guest",name:"guest",rules:[I("Please input event's date")],children:Object(p.jsx)(S.a,{mode:"multiple",showSearch:!0,allowClear:!0,style:{width:"100%"},placeholder:"Please select guests",onChange:function(e){return c(Object(m.a)(Object(m.a)({},r),{},{guest:e}))},children:e.guests.map((function(e){return Object(p.jsx)(S.a.Option,{value:e.username,children:e.username},e.username)}))})}),Object(p.jsx)(d.a,{justify:"end",children:Object(p.jsx)(g.a.Item,{wrapperCol:{},children:Object(p.jsx)(h.a,{type:"primary",htmlType:"submit",children:"Create Event"})})})]})},L=n(89),N=n(24),A=n.n(N),C=n(38);!function(e){e.SET_AUTH="SET_AUTH",e.SET_ERROR="SET_ERROR",e.SET_USER="SET_USER",e.SET_IS_LOADING="SET_IS_LOADING"}(r||(r={}));var R,k=n(18),G=n(21),P=n(182),D=n.n(P),V=function(){function e(){Object(k.a)(this,e)}return Object(G.a)(e,null,[{key:"getUsers",value:function(){var e=Object(C.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.a.get("./users.json"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),F={setUser:function(e){return{type:r.SET_USER,payload:e}},setIsAuth:function(e){return{type:r.SET_AUTH,payload:e}},setIsLoading:function(e){return{type:r.SET_IS_LOADING,payload:e}},setError:function(e){return{type:r.SET_ERROR,payload:e}},login:function(e,t){return function(){var n=Object(C.a)(A.a.mark((function n(r){return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(F.setIsLoading(!0)),setTimeout(Object(C.a)(A.a.mark((function n(){var a,c;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V.getUsers();case 2:a=n.sent,(c=a.data.find((function(n){return n.username===e&&n.password===t})))?(localStorage.setItem("auth","true"),localStorage.setItem("username",c.username),r(F.setUser(c)),r(F.setIsAuth(!0))):r(F.setError("Incorrect username or password!")),r(F.setIsLoading(!1));case 6:case"end":return n.stop()}}),n)}))),1e3)}catch(a){r(F.setError("A logging error occurred!"))}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{localStorage.removeItem("auth"),localStorage.removeItem("username"),t(F.setUser({})),t(F.setIsAuth(!1))}catch(n){alert(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};!function(e){e.SET_GUESTS="SET_GUESTS",e.SET_EVENTS="SET_EVENTS"}(R||(R={}));var H,J={setGuests:function(e){return{type:R.SET_GUESTS,payload:e}},setEvents:function(e){return{type:R.SET_EVENTS,payload:e}},fetchGuests:function(){return function(){var e=Object(C.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.getUsers();case 3:n=e.sent,t(J.setGuests(n.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},createEvent:function(e){return function(){var t=Object(C.a)(A.a.mark((function t(n){var r,a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",(a=JSON.parse(r)).push(e),n(J.setEvents(a)),localStorage.setItem("events",JSON.stringify(a))}catch(c){console.log(c)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fetchEvents:function(e){return function(){var t=Object(C.a)(A.a.mark((function t(n){var r,a,c;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",a=JSON.parse(r),c=a.filter((function(t){return t.author===e||t.guest===e})),n(J.setEvents(c))}catch(s){console.log(s)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},M=Object(m.a)(Object(m.a)({},F),J),z=function(){var e=Object(u.b)();return Object(L.b)(M,e)},Y=n(314),q=function(){var e=_((function(e){return e.auth})),t=e.error,n=e.isLoading,r=Object(a.useState)(""),c=Object(j.a)(r,2),s=c[0],u=c[1],o=Object(a.useState)(""),i=Object(j.a)(o,2),l=i[0],d=i[1],b=z().login;return Object(p.jsxs)(g.a,{onFinish:function(){b(s,l)},children:[t&&Object(p.jsx)("div",{style:{color:"crimson"},children:t}),Object(p.jsx)(g.a.Item,{label:"Username",name:"username",rules:[I("Please input your username!")],children:Object(p.jsx)(x.a,{value:s,onChange:function(e){return u(e.target.value)}})}),Object(p.jsx)(g.a.Item,{label:"Password",name:"password",rules:[I("Please input your password!")],children:Object(p.jsx)(x.a.Password,{value:l,onChange:function(e){return d(e.target.value)}})}),Object(p.jsx)(g.a.Item,{wrapperCol:{},children:Object(p.jsx)(h.a,{type:"primary",htmlType:"submit",loading:n,children:"Log In"})})]})};!function(e){e.LOGIN="/login",e.EVENT="/"}(H||(H={}));var B=[{path:H.LOGIN,exact:!0,component:function(){return Object(p.jsx)(i.a,{children:Object(p.jsx)(d.a,{justify:"center",align:"middle",className:"h100",children:Object(p.jsx)(Y.a,{children:Object(p.jsx)(q,{})})})})}}],K=[{path:H.EVENT,exact:!0,component:function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],c=z(),s=c.fetchGuests,u=c.createEvent,o=c.fetchEvents,l=_((function(e){return e.event})),O=l.guests,f=l.events,m=_((function(e){return e.auth})).user;Object(a.useEffect)((function(){s(),o(m.username)}),[]);return Object(p.jsxs)(i.a,{children:[Object(p.jsx)(v,{events:f}),Object(p.jsx)(d.a,{justify:"center",children:Object(p.jsx)(h.a,{onClick:function(){return r(!0)},children:"Create event"})}),Object(p.jsx)(b.a,{title:"Create event",visible:n,footer:null,onCancel:function(){return r(!1)},children:Object(p.jsx)(U,{guests:O,submit:function(e){r(!1),u(e)}})})]})}}],Q=function(){return _((function(e){return e.auth})).isAuth?Object(p.jsxs)(l.d,{children:[K.map((function(e){return Object(p.jsx)(l.b,{path:e.path,exact:e.exact,component:e.component},e.path)})),Object(p.jsx)(l.a,{to:H.EVENT})]}):Object(p.jsxs)(l.d,{children:[B.map((function(e){return Object(p.jsx)(l.b,{path:e.path,exact:e.exact,component:e.component},e.path)})),Object(p.jsx)(l.a,{to:H.LOGIN})]})},W=n(320),X=function(){var e=Object(l.g)(),t=_((function(e){return e.auth})),n=t.isAuth,r=t.user,a=z().logout;return Object(p.jsx)(i.a.Header,{children:Object(p.jsx)(d.a,{justify:"end",children:n?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{style:{color:"white"},children:r.username}),Object(p.jsx)(W.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(p.jsx)(W.a.Item,{onClick:function(){return a()},children:"Log Out"},1)})]}):Object(p.jsx)(W.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(p.jsx)(W.a.Item,{onClick:function(){return e.push(H.LOGIN)},children:"Log In"},1)})})})},Z=function(){var e=z(),t=e.setUser,n=e.setIsAuth;return Object(a.useEffect)((function(){localStorage.getItem("auth")&&(t({username:localStorage.getItem("username")}),n(!0))}),[]),Object(p.jsxs)(i.a,{children:[Object(p.jsx)(X,{}),Object(p.jsx)(i.a.Content,{children:Object(p.jsx)(Q,{})})]})},$=n(185),ee={isAuth:!1,error:"",isLoading:!1,user:{}},te={guests:[],events:[]};var ne={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_AUTH:return Object(m.a)(Object(m.a)({},e),{},{isAuth:t.payload,isLoading:!1});case r.SET_ERROR:return Object(m.a)(Object(m.a)({},e),{},{error:t.payload,isLoading:!1});case r.SET_USER:return Object(m.a)(Object(m.a)({},e),{},{user:t.payload});case r.SET_IS_LOADING:return Object(m.a)(Object(m.a)({},e),{},{isLoading:t.payload});default:return e}},event:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.SET_GUESTS:return Object(m.a)(Object(m.a)({},e),{},{guests:t.payload});case R.SET_EVENTS:return Object(m.a)(Object(m.a)({},e),{},{events:t.payload});default:return e}}},re=Object(L.c)(ne),ae=Object(L.d)(re,Object(L.a)($.a));s.a.render(Object(p.jsx)(u.a,{store:ae,children:Object(p.jsx)(o.a,{children:Object(p.jsx)(Z,{})})}),document.getElementById("root"))}},[[310,1,2]]]);
//# sourceMappingURL=main.01a5cca9.chunk.js.map